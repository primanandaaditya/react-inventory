{"ast":null,"code":"import _objectSpread from\"/home/nanda/Documents/react-inventory/node_modules/@babel/runtime/helpers/esm/objectSpread2\";import _slicedToArray from\"/home/nanda/Documents/react-inventory/node_modules/@babel/runtime/helpers/esm/slicedToArray\";import React,{useEffect,useState}from\"react\";import Nav from\"../komponen/Nav\";import Endpoint from\"../config/Endpoint\";import{useForm,SubmitHandler}from\"react-hook-form\";import axios from\"axios\";import{Link}from\"react-router-dom\";import Loading from\"../komponen/Loading\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";export default function AddProduk(){var _useForm=useForm(),register=_useForm.register,handleSubmit=_useForm.handleSubmit,watch=_useForm.watch,errors=_useForm.formState.errors;var _useState=useState([]),_useState2=_slicedToArray(_useState,2),ljenis=_useState2[0],setLjenis=_useState2[1];var _useState3=useState([]),_useState4=_slicedToArray(_useState3,2),lsatuan=_useState4[0],setLsatuan=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),load=_useState6[0],setLoad=_useState6[1];var _useState7=useState(''),_useState8=_slicedToArray(_useState7,2),message=_useState8[0],setMessage=_useState8[1];var _useState9=useState(''),_useState10=_slicedToArray(_useState9,2),payload=_useState10[0],setPayload=_useState10[1];var _useState11=useState('noimage.png'),_useState12=_slicedToArray(_useState11,2),selectedfile=_useState12[0],setSelectedfile=_useState12[1];function handleInputChange(event){setSelectedfile(event.target.files[0]);}var getJenisProduk=function getJenisProduk(){axios.get(Endpoint.BASE_URL+\"jenis_produk\").then(function(res){console.log(res.data.payload);setLjenis(res.data.payload);});};var getSatuan=function getSatuan(){axios.get(Endpoint.BASE_URL+\"satuan\").then(function(res){console.log(res.data.payload);setLsatuan(res.data.payload);});};var onSubmit=function onSubmit(data){setLoad(true);var fdata=new FormData();fdata.append('nama',data.nama);fdata.append('id_jenis',data.id_jenis);fdata.append('id_satuan',data.id_satuan);fdata.append('hbeli',data.hbeli);fdata.append('gambar',selectedfile);axios.post(Endpoint.BASE_URL+\"produk\",fdata,{headers:{'Content-Type':'multipart/form-data'}}).then(function(res){setLoad(false);setMessage(res.data.message);});};useEffect(function(){getJenisProduk();getSatuan();},[]);if(load){return/*#__PURE__*/_jsx(Loading,{});}else{return/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(Nav,{}),/*#__PURE__*/_jsx(\"div\",{className:\"container\",children:/*#__PURE__*/_jsxs(\"div\",{className:\"container-fluid\",children:[/*#__PURE__*/_jsx(\"h2\",{children:\"Tambah Produk\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:handleSubmit(onSubmit),children:[/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating mb-3\",children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},register(\"nama\",{required:true})),{},{type:\"text\",className:\"form-control\",id:\"nama\",placeholder:\"name@example.com\"})),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"nama\",children:\"Nama produk\"})]}),errors.nama&&/*#__PURE__*/_jsx(\"div\",{className:\"invalid-feedback\",children:\"This field is required\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating mb-3\",children:[/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},register(\"hbeli\",{required:true})),{},{type:\"number\",className:\"form-control\",id:\"hbeli\"})),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"nama\",children:\"Harga beli (Rp.)\"})]}),errors.hbeli&&/*#__PURE__*/_jsx(\"span\",{children:\"This field is required\"}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating\",children:[/*#__PURE__*/_jsxs(\"select\",_objectSpread(_objectSpread({},register(\"id_jenis\",{required:true})),{},{className:\"form-select\",\"aria-label\":\"Default select example\",children:[/*#__PURE__*/_jsx(\"option\",{selected:true,children:\"Pilih salah satu\"}),ljenis.map(function(x){return/*#__PURE__*/_jsx(\"option\",{value:x.id,children:x.nama});})]})),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"floatingSelect\",children:\"Pilih jenis produk\"})]}),errors.id_jenis&&/*#__PURE__*/_jsx(\"span\",{children:\"This field is required\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"form-floating\",children:[/*#__PURE__*/_jsxs(\"select\",_objectSpread(_objectSpread({},register(\"id_satuan\",{required:true})),{},{className:\"form-select\",\"aria-label\":\"Default select example\",children:[/*#__PURE__*/_jsx(\"option\",{selected:true,children:\"Pilih salah satu\"}),lsatuan.map(function(x){return/*#__PURE__*/_jsx(\"option\",{value:x.id,children:x.nama});})]})),/*#__PURE__*/_jsx(\"label\",{htmlFor:\"floatingSelect\",children:\"Pilih satuan\"})]}),errors.id_satuan&&/*#__PURE__*/_jsx(\"span\",{children:\"This field is required\"}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsx(\"div\",{className:\"input-group\",children:/*#__PURE__*/_jsx(\"input\",_objectSpread(_objectSpread({},register(\"gambar\",{required:false})),{},{type:\"file\",className:\"form-control\",id:\"gambar\",onChange:handleInputChange,\"aria-describedby\":\"inputGroupFileAddon04\",\"aria-label\":\"Upload\"}))}),/*#__PURE__*/_jsx(\"br\",{}),/*#__PURE__*/_jsxs(\"div\",{className:\"btn-group\",role:\"group\",\"aria-label\":\"Basic example\",children:[/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"btn btn-primary\",children:\"Simpan\"}),/*#__PURE__*/_jsx(Link,{to:\"/produk\",className:\"btn btn-secondary\",children:\"Kembali\"})]})]}),/*#__PURE__*/_jsx(\"br\",{}),message==''?/*#__PURE__*/_jsx(\"div\",{}):/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-success\",role:\"alert\",children:message}),payload==''?/*#__PURE__*/_jsx(\"div\",{}):/*#__PURE__*/_jsx(\"div\",{className:\"alert alert-danger\",role:\"alert\",children:payload})]})})]});}}","map":{"version":3,"sources":["/home/nanda/Documents/react-inventory/src/produk/AddProduk.jsx"],"names":["React","useEffect","useState","Nav","Endpoint","useForm","SubmitHandler","axios","Link","Loading","AddProduk","register","handleSubmit","watch","errors","formState","ljenis","setLjenis","lsatuan","setLsatuan","load","setLoad","message","setMessage","payload","setPayload","selectedfile","setSelectedfile","handleInputChange","event","target","files","getJenisProduk","get","BASE_URL","then","res","console","log","data","getSatuan","onSubmit","fdata","FormData","append","nama","id_jenis","id_satuan","hbeli","post","headers","required","map","x","id"],"mappings":"+OAAA,MAAOA,CAAAA,KAAP,EAAeC,SAAf,CAA0BC,QAA1B,KAAyC,OAAzC,CACA,MAAOC,CAAAA,GAAP,KAAgB,iBAAhB,CACA,MAAOC,CAAAA,QAAP,KAAqB,oBAArB,CACA,OAASC,OAAT,CAAkBC,aAAlB,KAAuC,iBAAvC,CACA,MAAOC,CAAAA,KAAP,KAAkB,OAAlB,CACA,OAAQC,IAAR,KAAmB,kBAAnB,CACA,MAAOC,CAAAA,OAAP,KAAoB,qBAApB,C,wFAEA,cAAe,SAASC,CAAAA,SAAT,EAAoB,CAE/B,aAAiEL,OAAO,EAAxE,CAAQM,QAAR,UAAQA,QAAR,CAAkBC,YAAlB,UAAkBA,YAAlB,CAAgCC,KAAhC,UAAgCA,KAAhC,CAAoDC,MAApD,UAAuCC,SAAvC,CAAoDD,MAApD,CACA,cAA2BZ,QAAQ,CAAC,EAAD,CAAnC,wCAAOc,MAAP,eAAcC,SAAd,eACA,eAA6Bf,QAAQ,CAAC,EAAD,CAArC,yCAAOgB,OAAP,eAAeC,UAAf,eACA,eAAuBjB,QAAQ,CAAC,KAAD,CAA/B,yCAAOkB,IAAP,eAAYC,OAAZ,eACA,eAA2BnB,QAAQ,CAAC,EAAD,CAAnC,yCAAOoB,OAAP,eAAeC,UAAf,eACA,eAA2BrB,QAAQ,CAAC,EAAD,CAAnC,0CAAOsB,OAAP,gBAAeC,UAAf,gBACA,gBAAqCvB,QAAQ,CAAC,aAAD,CAA7C,2CAAOwB,YAAP,gBAAoBC,eAApB,gBAEA,QAASC,CAAAA,iBAAT,CAA2BC,KAA3B,CAAiC,CAC7BF,eAAe,CAACE,KAAK,CAACC,MAAN,CAAaC,KAAb,CAAmB,CAAnB,CAAD,CAAf,CACH,CAED,GAAMC,CAAAA,cAAc,CAAG,QAAjBA,CAAAA,cAAiB,EAAM,CACzBzB,KAAK,CAAC0B,GAAN,CAAU7B,QAAQ,CAAC8B,QAAT,eAAV,EACKC,IADL,CACU,SAAAC,GAAG,CAAI,CACTC,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,IAAJ,CAASf,OAArB,EACAP,SAAS,CAACmB,GAAG,CAACG,IAAJ,CAASf,OAAV,CAAT,CACH,CAJL,EAKH,CAND,CAOA,GAAMgB,CAAAA,SAAS,CAAG,QAAZA,CAAAA,SAAY,EAAM,CACpBjC,KAAK,CAAC0B,GAAN,CAAU7B,QAAQ,CAAC8B,QAAT,SAAV,EACKC,IADL,CACU,SAAAC,GAAG,CAAI,CACTC,OAAO,CAACC,GAAR,CAAYF,GAAG,CAACG,IAAJ,CAASf,OAArB,EACAL,UAAU,CAACiB,GAAG,CAACG,IAAJ,CAASf,OAAV,CAAV,CACH,CAJL,EAKH,CAND,CAOA,GAAMiB,CAAAA,QAAQ,CAAG,QAAXA,CAAAA,QAAW,CAAAF,IAAI,CAAI,CACrBlB,OAAO,CAAC,IAAD,CAAP,CACA,GAAMqB,CAAAA,KAAK,CAAG,GAAIC,CAAAA,QAAJ,EAAd,CACAD,KAAK,CAACE,MAAN,CAAa,MAAb,CAAqBL,IAAI,CAACM,IAA1B,EACAH,KAAK,CAACE,MAAN,CAAa,UAAb,CAAwBL,IAAI,CAACO,QAA7B,EACAJ,KAAK,CAACE,MAAN,CAAa,WAAb,CAAyBL,IAAI,CAACQ,SAA9B,EACAL,KAAK,CAACE,MAAN,CAAa,OAAb,CAAqBL,IAAI,CAACS,KAA1B,EACAN,KAAK,CAACE,MAAN,CAAa,QAAb,CAAsBlB,YAAtB,EAEAnB,KAAK,CAAC0C,IAAN,CAAW7C,QAAQ,CAAC8B,QAAT,SAAX,CAAyCQ,KAAzC,CAAgD,CAC5CQ,OAAO,CAAE,CACL,eAAgB,qBADX,CADmC,CAAhD,EAIKf,IAJL,CAIU,SAAAC,GAAG,CAAI,CACTf,OAAO,CAAC,KAAD,CAAP,CACAE,UAAU,CAACa,GAAG,CAACG,IAAJ,CAASjB,OAAV,CAAV,CACH,CAPL,EAQH,CAjBD,CAoBArB,SAAS,CAAC,UAAM,CACZ+B,cAAc,GACdQ,SAAS,GACZ,CAHQ,CAGP,EAHO,CAAT,CAKA,GAAIpB,IAAJ,CAAS,CACL,mBACI,KAAC,OAAD,IADJ,CAGH,CAJD,IAIK,CACD,mBACI,oCACI,KAAC,GAAD,IADJ,cAEI,YAAK,SAAS,CAAC,WAAf,uBACI,aAAK,SAAS,CAAC,iBAAf,wBACI,qCADJ,cAGI,aAHJ,cAKI,cAAM,QAAQ,CAAER,YAAY,CAAC6B,QAAD,CAA5B,wBACI,aAAK,SAAS,CAAC,oBAAf,wBACI,4CAAW9B,QAAQ,CAAC,MAAD,CAAQ,CAACwC,QAAQ,CAAC,IAAV,CAAR,CAAnB,MAA6C,IAAI,CAAC,MAAlD,CAAyD,SAAS,CAAC,cAAnE,CAAkF,EAAE,CAAC,MAArF,CACO,WAAW,CAAC,kBADnB,GADJ,cAGI,cAAO,OAAO,CAAC,MAAf,yBAHJ,GADJ,CAMKrC,MAAM,CAAC+B,IAAP,eAAe,YAAK,SAAS,CAAC,kBAAf,oCANpB,cAUI,aAAK,SAAS,CAAC,oBAAf,wBACI,4CAAWlC,QAAQ,CAAC,OAAD,CAAS,CAACwC,QAAQ,CAAC,IAAV,CAAT,CAAnB,MAA8C,IAAI,CAAC,QAAnD,CAA4D,SAAS,CAAC,cAAtE,CAAqF,EAAE,CAAC,OAAxF,GADJ,cAEI,cAAO,OAAO,CAAC,MAAf,8BAFJ,GAVJ,CAcKrC,MAAM,CAACkC,KAAP,eAAgB,gDAdrB,cAiBI,aAAK,SAAS,CAAC,eAAf,wBACI,8CAAYrC,QAAQ,CAAC,UAAD,CAAY,CAACwC,QAAQ,CAAC,IAAV,CAAZ,CAApB,MAAkD,SAAS,CAAC,aAA5D,CAA0E,aAAW,wBAArF,wBACI,eAAQ,QAAQ,KAAhB,8BADJ,CAEKnC,MAAM,CAACoC,GAAP,CAAW,SAAAC,CAAC,qBACT,eAAQ,KAAK,CAAEA,CAAC,CAACC,EAAjB,UAAsBD,CAAC,CAACR,IAAxB,EADS,EAAZ,CAFL,IADJ,cAOI,cAAO,OAAO,CAAC,gBAAf,gCAPJ,GAjBJ,CA0BK/B,MAAM,CAACgC,QAAP,eAAmB,gDA1BxB,cA6BI,aA7BJ,cA8BI,aAAK,SAAS,CAAC,eAAf,wBACI,8CAAYnC,QAAQ,CAAC,WAAD,CAAa,CAACwC,QAAQ,CAAC,IAAV,CAAb,CAApB,MAAmD,SAAS,CAAC,aAA7D,CAA2E,aAAW,wBAAtF,wBACI,eAAQ,QAAQ,KAAhB,8BADJ,CAEKjC,OAAO,CAACkC,GAAR,CAAY,SAAAC,CAAC,qBACV,eAAQ,KAAK,CAAEA,CAAC,CAACC,EAAjB,UAAsBD,CAAC,CAACR,IAAxB,EADU,EAAb,CAFL,IADJ,cAOI,cAAO,OAAO,CAAC,gBAAf,0BAPJ,GA9BJ,CAuCK/B,MAAM,CAACiC,SAAP,eAAoB,gDAvCzB,cA0CI,aA1CJ,cA2CI,YAAK,SAAS,CAAC,aAAf,uBACI,4CAAYpC,QAAQ,CAAC,QAAD,CAAU,CAACwC,QAAQ,CAAC,KAAV,CAAV,CAApB,MAAiD,IAAI,CAAC,MAAtD,CAA6D,SAAS,CAAC,cAAvE,CAAsF,EAAE,CAAC,QAAzF,CAAkG,QAAQ,CAAEvB,iBAA5G,CACQ,mBAAiB,uBADzB,CACiD,aAAW,QAD5D,GADJ,EA3CJ,cAgDI,aAhDJ,cAiDI,aAAK,SAAS,CAAC,WAAf,CAA2B,IAAI,CAAC,OAAhC,CAAwC,aAAW,eAAnD,wBACI,eAAQ,IAAI,CAAC,QAAb,CAAsB,SAAS,CAAC,iBAAhC,oBADJ,cAEI,KAAC,IAAD,EAAM,EAAE,CAAC,SAAT,CAAmB,SAAS,CAAC,mBAA7B,qBAFJ,GAjDJ,GALJ,cA6DI,aA7DJ,CA8DMN,OAAO,EAAI,EAAX,cAAiB,cAAjB,cAA+B,YAAK,SAAS,CAAC,qBAAf,CAAqC,IAAI,CAAC,OAA1C,UAC5BA,OAD4B,EA9DrC,CAkEME,OAAO,EAAI,EAAX,cAAgB,cAAhB,cAA8B,YAAK,SAAS,CAAC,oBAAf,CAAoC,IAAI,CAAC,OAAzC,UAC3BA,OAD2B,EAlEpC,GADJ,EAFJ,GADJ,CA6EH,CAIJ","sourcesContent":["import React, {useEffect, useState} from \"react\";\nimport Nav from \"../komponen/Nav\";\nimport Endpoint from \"../config/Endpoint\";\nimport { useForm, SubmitHandler } from \"react-hook-form\";\nimport axios from \"axios\";\nimport {Link} from \"react-router-dom\";\nimport Loading from \"../komponen/Loading\";\n\nexport default function AddProduk(){\n\n    const { register, handleSubmit, watch, formState: { errors } } = useForm();\n    const [ljenis,setLjenis] = useState([])\n    const [lsatuan,setLsatuan] = useState([])\n    const [load,setLoad] = useState(false)\n    const [message,setMessage]=useState('')\n    const [payload,setPayload]=useState('')\n    const [selectedfile,setSelectedfile]=useState('noimage.png')\n\n    function handleInputChange(event){\n        setSelectedfile(event.target.files[0])\n    }\n\n    const getJenisProduk = () => {\n        axios.get(Endpoint.BASE_URL + `jenis_produk`)\n            .then(res => {\n                console.log(res.data.payload)\n                setLjenis(res.data.payload)\n            })\n    }\n    const getSatuan = () => {\n        axios.get(Endpoint.BASE_URL + `satuan`)\n            .then(res => {\n                console.log(res.data.payload)\n                setLsatuan(res.data.payload)\n            })\n    }\n    const onSubmit = data => {\n        setLoad(true)\n        const fdata = new FormData()\n        fdata.append('nama', data.nama)\n        fdata.append('id_jenis',data.id_jenis)\n        fdata.append('id_satuan',data.id_satuan)\n        fdata.append('hbeli',data.hbeli)\n        fdata.append('gambar',selectedfile)\n\n        axios.post(Endpoint.BASE_URL + `produk`, fdata, {\n            headers: {\n                'Content-Type': 'multipart/form-data'\n            }})\n            .then(res => {\n                setLoad(false)\n                setMessage(res.data.message)\n            })\n    }\n\n\n    useEffect(() => {\n        getJenisProduk()\n        getSatuan()\n    },[])\n\n    if (load){\n        return (\n            <Loading/>\n        )\n    }else{\n        return(\n            <div>\n                <Nav/>\n                <div className=\"container\">\n                    <div className=\"container-fluid\">\n                        <h2>Tambah Produk</h2>\n\n                        <br/>\n\n                        <form onSubmit={handleSubmit(onSubmit)}>\n                            <div className=\"form-floating mb-3\">\n                                <input {...register(\"nama\",{required:true})} type=\"text\" className=\"form-control\" id=\"nama\"\n                                       placeholder=\"name@example.com\"/>\n                                <label htmlFor=\"nama\">Nama produk</label>\n                            </div>\n                            {errors.nama && <div className=\"invalid-feedback\">\n                                This field is required\n                            </div>}\n\n                            <div className=\"form-floating mb-3\">\n                                <input {...register(\"hbeli\",{required:true})} type=\"number\" className=\"form-control\" id=\"hbeli\"/>\n                                <label htmlFor=\"nama\">Harga beli (Rp.)</label>\n                            </div>\n                            {errors.hbeli && <span>This field is required</span>}\n\n\n                            <div className=\"form-floating\">\n                                <select {...register(\"id_jenis\",{required:true})} className=\"form-select\" aria-label=\"Default select example\">\n                                    <option selected>Pilih salah satu</option>\n                                    {ljenis.map(x => (\n                                        <option value={x.id}>{x.nama}</option>\n                                    ))}\n                                </select>\n                                <label htmlFor=\"floatingSelect\">Pilih jenis produk</label>\n                            </div>\n                            {errors.id_jenis && <span>This field is required</span>}\n\n\n                            <br/>\n                            <div className=\"form-floating\">\n                                <select {...register(\"id_satuan\",{required:true})} className=\"form-select\" aria-label=\"Default select example\">\n                                    <option selected>Pilih salah satu</option>\n                                    {lsatuan.map(x => (\n                                        <option value={x.id}>{x.nama}</option>\n                                    ))}\n                                </select>\n                                <label htmlFor=\"floatingSelect\">Pilih satuan</label>\n                            </div>\n                            {errors.id_satuan && <span>This field is required</span>}\n\n\n                            <br/>\n                            <div className=\"input-group\">\n                                <input  {...register(\"gambar\",{required:false})} type=\"file\" className=\"form-control\" id=\"gambar\" onChange={handleInputChange}\n                                        aria-describedby=\"inputGroupFileAddon04\" aria-label=\"Upload\"/>\n                            </div>\n\n                            <br/>\n                            <div className=\"btn-group\" role=\"group\" aria-label=\"Basic example\">\n                                <button type=\"submit\" className=\"btn btn-primary\">Simpan</button>\n                                <Link to=\"/produk\" className=\"btn btn-secondary\">Kembali</Link>\n                            </div>\n\n                        </form>\n\n                        <br/>\n                        { message == '' ?  <div></div> : <div className=\"alert alert-success\" role=\"alert\">\n                            {message}\n                        </div>}\n\n                        { payload == '' ? <div></div> : <div className=\"alert alert-danger\" role=\"alert\">\n                            {payload}\n                        </div>}\n                    </div>\n                </div>\n            </div>\n        )\n    }\n\n\n\n}"]},"metadata":{},"sourceType":"module"}